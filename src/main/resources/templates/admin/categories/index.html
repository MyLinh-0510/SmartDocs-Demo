<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Danh s√°ch danh m·ª•c</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link th:href="@{/css/dashboard.css}" rel="stylesheet">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>

    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f6f8;
        }

        #wrapper {
            display: flex;
            min-height: 100vh;
        }

        .main-content {
            flex: 1;
            padding: 30px;
            background-color: #fff;
        }

        .main-content h1 {
            text-align: center;
            margin-bottom: 25px;
        }

        .add {
            margin-bottom: 30px;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            background-color: #fff;
        }

        .table th, .table td {
            padding: 12px;
            border: 1px solid #dee2e6;
            text-align: left;
        }

        .table th {
            background-color: #f1f1f1;
        }

        /* üåà Xen k·∫Ω m√†u d√≤ng */
        .table tbody tr:nth-child(odd) {
            background-color: #ffffff;
        }

        .table tbody tr:nth-child(even) {
            background-color: #e1dddd;
        }

        .btn {
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 14px;
            margin-right: 5px;
            text-decoration: none;
            display: inline-block;
        }

        .btn-add { background-color: #fcba03; color: #fff; }
        .btn-info { background-color: #17a2b8; color: #fff; }
        .btn-danger { background-color: #dc3545; color: #fff; }
        .btn-detail { background-color: #eaa95b; color: #fff; }
        .btn-edit { background-color: #4caf50; color: #fff; }

        .back-link {
            margin-top: 30px;
            text-align: center;
        }

        /* Responsive nh·ªè */
        @media (max-width: 720px) {
            .table th, .table td { padding: 8px; font-size: 14px; }
            .add .btn { padding: 8px 10px; font-size: 13px; }
        }
    </style>

</head>
<body>

<!-- Navbar -->
<div th:insert="fragments/navbar :: navbar"></div>

<!-- Layout -->
<div id="wrapper">

    <!-- Sidebar -->
    <div th:insert="fragments/sidebar :: sidebar"></div>

    <!-- Main Content -->
    <div class="main-content">
        <h1>Danh s√°ch danh m·ª•c</h1>

        <!-- Th√™m m·ªõi -->
        <div class="add">
            <a th:href="@{/admin/categories/create}" class="btn btn-add">‚ûï Th√™m danh m·ª•c</a>
        </div>

        <!-- B·∫£ng danh m·ª•c -->
        <table class="table">
            <thead>
            <tr>
                <th>ID</th>
                <th>T√™n danh m·ª•c</th>
                <th>M√¥ t·∫£</th>
                <th>S·ªë t√†i li·ªáu</th>
                <th>H√†nh ƒë·ªông</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="cat, iterStat : ${categories}">
                <td th:text="${iterStat.index + 1}">1</td>
                <td th:text="${cat.name}">VƒÉn b·∫£n</td>
                <td th:text="${cat.description != null ? cat.description : '-'}">M√¥ t·∫£</td>
                <!-- N·∫øu b·∫°n kh√¥ng load documents trong query, c√≥ th·ªÉ hi·ªÉn th·ªã s·ªë 0 ho·∫∑c d√πng service count -->
                <td th:text="${cat.documents != null ? #lists.size(cat.documents) : 0}">0</td>
                <td>
                    <a th:href="@{'/admin/categories/edit/' + ${cat.id}}" class="btn btn-sm btn-info">‚úèÔ∏è S·ª≠a</a>

                    <form th:action="@{'/admin/categories/delete/' + ${cat.id}}" method="post" style="display:inline;">
                        <button type="submit" class="btn btn-danger"
                                onclick="return confirm('X√°c nh·∫≠n xo√° danh m·ª•c n√†y?')">üóëÔ∏è Xo√°</button>
                    </form>
                </td>
            </tr>

            <!-- Hi·ªÉn th·ªã khi kh√¥ng c√≥ category -->
            <tr th:if="${#lists.isEmpty(categories)}">
                <td colspan="6" style="text-align:center; padding:20px;">Ch∆∞a c√≥ danh m·ª•c n√†o.</td>
            </tr>
            </tbody>
        </table>

        <!-- Quay l·∫°i -->
        <div class="back-link">
            <a th:href="@{/admin/dashboard}" class="btn btn-danger">‚¨Ö Quay l·∫°i Dashboard</a>
        </div>
    </div>
</div>

</body>
</html>
